# üóÑÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

## üìä –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** 10,000 - 100,000
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** –æ—á–µ–Ω—å —á–∞—Å—Ç—ã–µ (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤ —Å–µ–∫—É–Ω–¥—É)
- **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –Ω—É–∂–Ω–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤

---

## üèóÔ∏è –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### **–û—Å–Ω–æ–≤–Ω–∞—è –ë–î: PostgreSQL 15+**

**–ü–æ—á–µ–º—É PostgreSQL:**
- ‚úÖ **ACID –≥–∞—Ä–∞–Ω—Ç–∏–∏** - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** - –∑–∞—â–∏—Ç–∞ –æ—Ç race conditions –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–æ–≤
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ—Ç–ª–∏—á–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–æ –º–∏–ª–ª–∏–æ–Ω–æ–≤ –∑–∞–ø–∏—Å–µ–π
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –≤—Ä–µ–º–µ–Ω–µ–º –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
- ‚úÖ **JSON –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ –≤ –±—É–¥—É—â–µ–º
- ‚úÖ **–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫** - –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–∑–∞–¥–∞–Ω–∏–π
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è** - pg_stat_statements –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è 100k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
```sql
-- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL (postgresql.conf)
shared_buffers = 4GB                    # 25% –æ—Ç RAM
effective_cache_size = 12GB             # 75% –æ—Ç RAM
maintenance_work_mem = 1GB
checkpoint_completion_target = 0.9
wal_buffers = 16MB
default_statistics_target = 100
random_page_cost = 1.1                  # –î–ª—è SSD
effective_io_concurrency = 200          # –î–ª—è SSD
work_mem = 20MB
min_wal_size = 1GB
max_wal_size = 4GB
max_connections = 200
```

---

### **–ö—ç—à-—Å–ª–æ–π: Redis 7+**

**–ü–æ—á–µ–º—É Redis:**
- ‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å** - –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã
- ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤** - –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø
- ‚úÖ **–û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á** - –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ **Rate limiting** - –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞
- ‚úÖ **Pub/Sub** - –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
1. **–ö—ç—à –±–∞–ª–∞–Ω—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (TTL: 5 –º–∏–Ω—É—Ç)
2. **–û—á–µ—Ä–µ–¥—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
3. **Rate limiting** –¥–ª—è API endpoints
4. **–°—á–µ—Ç—á–∏–∫–∏** (–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)

---

## üìê –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã –ë–î

### **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:**

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
CREATE INDEX idx_users_telegram_id ON users(telegram_id);
CREATE INDEX idx_users_referral_code ON users(referral_code) WHERE referral_code IS NOT NULL;
CREATE INDEX idx_users_referrer_id ON users(referrer_id) WHERE referrer_id IS NOT NULL;

-- –ë–∞–ª–∞–Ω—Å—ã (—Å–∞–º–∞—è —á–∞—Å—Ç–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è!)
CREATE UNIQUE INDEX idx_user_balances_user_id ON user_balances(user_id);
CREATE INDEX idx_user_balances_updated_at ON user_balances(updated_at);

-- –ó–∞–¥–∞–Ω–∏—è
CREATE INDEX idx_tasks_status ON tasks(status) WHERE status = 'active';
CREATE INDEX idx_tasks_creator_id ON tasks(creator_id);
CREATE INDEX idx_tasks_created_at ON tasks(created_at);
CREATE INDEX idx_tasks_is_test ON tasks(is_test) WHERE is_test = false;

-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ TON
CREATE INDEX idx_ton_transactions_user_id ON ton_transactions(user_id);
CREATE INDEX idx_ton_transactions_status ON ton_transactions(status) WHERE status = 'pending';
CREATE INDEX idx_ton_transactions_tx_hash ON ton_transactions(tx_hash);
CREATE INDEX idx_ton_transactions_idempotency_key ON ton_transactions(idempotency_key);
CREATE INDEX idx_ton_transactions_created_at ON ton_transactions(created_at);

-- –î–µ–ø–æ–∑–∏—Ç—ã
CREATE UNIQUE INDEX idx_deposits_tx_hash ON deposits(tx_hash);
CREATE INDEX idx_deposits_user_id ON deposits(user_id) WHERE user_id IS NOT NULL;
CREATE INDEX idx_deposits_status ON deposits(status) WHERE status = 'pending';
CREATE INDEX idx_deposits_created_at ON deposits(created_at);

-- –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π
CREATE INDEX idx_user_tasks_user_id ON user_tasks(user_id);
CREATE INDEX idx_user_tasks_task_id ON user_tasks(task_id);
CREATE INDEX idx_user_tasks_status ON user_tasks(status);
CREATE INDEX idx_user_tasks_escrow_ends_at ON user_tasks(escrow_ends_at) WHERE status = 'in_progress';
```

### **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤):**

```sql
-- –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –º–µ—Å—è—Ü–∞–º
CREATE TABLE ton_transactions (
    -- –ø–æ–ª—è
) PARTITION BY RANGE (created_at);

CREATE TABLE ton_transactions_2024_01 PARTITION OF ton_transactions
    FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');
-- –∏ —Ç.–¥.
```

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–∞–ª–∞–Ω—Å–∞–º–∏

### **–ü—Ä–æ–±–ª–µ–º–∞: Race Conditions**

–ü—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–æ–±–ª–µ–º–∞:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1: –ß–∏—Ç–∞–µ—Ç –±–∞–ª–∞–Ω—Å = 100 TON
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2: –ß–∏—Ç–∞–µ—Ç –±–∞–ª–∞–Ω—Å = 100 TON
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1: –°–ø–∏—Å—ã–≤–∞–µ—Ç 50 TON ‚Üí –ë–∞–ª–∞–Ω—Å = 50 TON
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2: –°–ø–∏—Å—ã–≤–∞–µ—Ç 50 TON ‚Üí –ë–∞–ª–∞–Ω—Å = 50 TON (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0!)
```

### **–†–µ—à–µ–Ω–∏–µ: SELECT FOR UPDATE**

```python
# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
def update_balance_safely(db: Session, user_id: int, amount: Decimal):
    # –ë–ª–æ–∫–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    balance = db.query(UserBalance).filter(
        UserBalance.user_id == user_id
    ).with_for_update().first()
    
    if balance:
        balance.ton_active_balance += amount
        db.commit()
```

---

## üîÑ –ì–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: PostgreSQL + Redis

### **–°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã:**

```
1. –ß—Ç–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞:
   - –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º Redis (–±—ã—Å—Ç—Ä–æ)
   - –ï—Å–ª–∏ –Ω–µ—Ç –≤ –∫—ç—à–µ ‚Üí PostgreSQL ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Redis

2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞:
   - –û–±–Ω–æ–≤–ª—è–µ–º PostgreSQL (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è)
   - –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ–º –∫—ç—à –≤ Redis
   - –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π - –æ–±–Ω–æ–≤–ª—è–µ–º Redis —Å—Ä–∞–∑—É

3. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –æ—á–µ—Ä–µ–¥—å Redis (–±—ã—Å—Ç—Ä–æ)
   - –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑ –æ—á–µ—Ä–µ–¥–∏
   - –û–±–Ω–æ–≤–ª—è–µ—Ç PostgreSQL
```

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞

### **–î–ª—è 10,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- **CPU:** 2-4 —è–¥—Ä–∞
- **RAM:** 8GB (4GB PostgreSQL, 2GB Redis, 2GB —Å–∏—Å—Ç–µ–º–∞)
- **–î–∏—Å–∫:** SSD 100GB
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~$20-40/–º–µ—Å—è—Ü

### **–î–ª—è 100,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- **CPU:** 4-8 —è–¥–µ—Ä
- **RAM:** 16-32GB (8-16GB PostgreSQL, 4-8GB Redis, 4-8GB —Å–∏—Å—Ç–µ–º–∞)
- **–î–∏—Å–∫:** SSD 500GB+ (–ª—É—á—à–µ NVMe)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~$80-200/–º–µ—Å—è—Ü

### **–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:**
- **–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä:** PostgreSQL + Backend
- **–û—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:** Redis (–º–æ–∂–Ω–æ –Ω–∞ —Ç–æ–º –∂–µ, –Ω–æ –ª—É—á—à–µ –æ—Ç–¥–µ–ª—å–Ω–æ)
- **Read Replicas:** –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —á—Ç–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### **–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**

1. **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –ë–î:**
   - –ß—Ç–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞: < 10ms
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞: < 50ms
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: < 100ms

2. **–ù–∞–≥—Ä—É–∑–∫–∞:**
   - Connections: < 80% –æ—Ç max_connections
   - CPU: < 70%
   - RAM: < 80%

3. **–ó–∞–ø—Ä–æ—Å—ã:**
   - –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (> 1 —Å–µ–∫) - –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å
   - –ß–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å

### **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- **pg_stat_statements** - –∞–Ω–∞–ª–∏–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **pgAdmin / DBeaver** - –≤–∏–∑—É–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Grafana + Prometheus** - –¥–∞—à–±–æ—Ä–¥—ã
- **Redis Insight** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Redis

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø
pg_dump -U user -d blackmirrowmarket -F c -f backup_$(date +%Y%m%d).dump

# –†–µ–ø–ª–∏–∫–∞—Ü–∏—è (–¥–ª—è –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏)
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ streaming replication
```

### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (SSL)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ (firewall)
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

## üìà –ü–ª–∞–Ω –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

### **–≠—Ç–∞–ø 1: –î–æ 10,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- PostgreSQL –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- Redis –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ
- –ë–∞–∑–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã
- Connection pooling

### **–≠—Ç–∞–ø 2: 10,000 - 50,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redis
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü

### **–≠—Ç–∞–ø 3: 50,000 - 100,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- Read replicas –¥–ª—è —á—Ç–µ–Ω–∏—è
- –û—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è Redis
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (sharding)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å —Ö–æ—Å—Ç–∏–Ω–≥–∞

### **DigitalOcean:**
- **10k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** Droplet 8GB RAM - $48/–º–µ—Å—è—Ü
- **100k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** Droplet 32GB RAM - $192/–º–µ—Å—è—Ü
- **Managed PostgreSQL:** +$15-50/–º–µ—Å—è—Ü
- **Managed Redis:** +$15-50/–º–µ—Å—è—Ü

### **Hetzner:**
- **10k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** CPX31 (8GB) - ‚Ç¨8.90/–º–µ—Å—è—Ü
- **100k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** CCX33 (32GB) - ‚Ç¨60.90/–º–µ—Å—è—Ü

### **AWS RDS (PostgreSQL):**
- **10k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** db.t3.medium - ~$50/–º–µ—Å—è—Ü
- **100k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** db.r5.xlarge - ~$200/–º–µ—Å—è—Ü

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–î–ª—è –≤–∞—à–µ–≥–æ —Å–ª—É—á–∞—è (10k-100k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —á–∞—Å—Ç—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏):**

1. **PostgreSQL 15+** - –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
2. **Redis 7+** - –∫—ç—à –∏ –æ—á–µ—Ä–µ–¥–∏
3. **Connection pooling** (PgBouncer)
4. **–ò–Ω–¥–µ–∫—Å—ã** –Ω–∞ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª—è—Ö
5. **SELECT FOR UPDATE** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–≤
6. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞

**–ù–∞—á–∞—Ç—å –º–æ–∂–Ω–æ —Å:**
- DigitalOcean Droplet 8GB ($48/–º–µ—Å)
- PostgreSQL –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ
- Redis –Ω–∞ —Ç–æ–º –∂–µ —Å–µ—Ä–≤–µ—Ä–µ
- –ü—Ä–∏ —Ä–æ—Å—Ç–µ - –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ managed —Å–µ—Ä–≤–∏—Å—ã

–≠—Ç–æ –¥–∞—Å—Ç –≤–∞–º:
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å (ACID)
- ‚úÖ –°–∫–æ—Ä–æ—Å—Ç—å (–∫—ç—à)
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º–∏

